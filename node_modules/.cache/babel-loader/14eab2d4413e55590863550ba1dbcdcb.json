{"ast":null,"code":"import _defineProperty from\"/Users/alyona/Docs/Praktikum-Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alyona/Docs/Praktikum-Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alyona/Docs/Praktikum-Projects/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback}from'react';import PopupWithForm from'./PopupWithForm.js';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{formsValidator}from'./FormsValidator.js';function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser;var _React$useState=React.useState({userName:\"\",profileDescription:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState({userNameErrors:{required:false,minLength:false,maxLength:false},profileDescriptionErrors:{required:false,minLength:false,maxLength:false}}),_React$useState4=_slicedToArray(_React$useState3,2),errors=_React$useState4[0],setErrors=_React$useState4[1];var currentUserData=React.useContext(CurrentUserContext);var handleSubmit=useCallback(function(e){e.preventDefault();onUpdateUser({name:formValues.userName,about:formValues.profileDescription});},[onUpdateUser,formValues]);React.useEffect(function(){if(currentUserData){setFormValues({userName:currentUserData.name,profileDescription:currentUserData.about});}},[currentUserData]);var handleNameChange=useCallback(function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});var userNameValidationResult=formsValidator.validateEditProfileNameInput(value);setErrors(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{userNameErrors:userNameValidationResult});});},[setFormValues,setErrors]);var handleDescriptionChange=useCallback(function(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});var profileDescriptionValidationResult=formsValidator.validateEditProfileDescriptionInput(value);setErrors(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{profileDescriptionErrors:profileDescriptionValidationResult});});},[setFormValues,setErrors]);var isUserNameInvalid=Object.values(errors.userNameErrors).some(Boolean);var isDescriptionInvalid=Object.values(errors.profileDescriptionErrors).some(Boolean);var isSubmitDisabled=isUserNameInvalid||isDescriptionInvalid;return/*#__PURE__*/React.createElement(PopupWithForm,{title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",name:\"profile\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"label\",{className:\"popup__input\"},/*#__PURE__*/React.createElement(\"input\",{className:\"popup__field popup__field_name\",value:formValues.userName,onChange:handleNameChange,type:\"text\",name:\"userName\",placeholder:\"\\u0418\\u043C\\u044F\"}),errors.userNameErrors.required&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0435\"),errors.userNameErrors.minLength&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u043B\\u0438\\u043D\\u0430 \\u0438\\u043C\\u0435\\u043D\\u0438 - 2 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430\"),errors.userNameErrors.maxLength&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u043B\\u0438\\u043D\\u0430 \\u0438\\u043C\\u0435\\u043D\\u0438 - 40 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432\")),/*#__PURE__*/React.createElement(\"label\",{className:\"popup__input\"},/*#__PURE__*/React.createElement(\"input\",{className:\"popup__field popup__field_description\",value:formValues.profileDescription,onChange:handleDescriptionChange,type:\"text\",name:\"profileDescription\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"}),errors.profileDescriptionErrors.required&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0435\"),errors.profileDescriptionErrors.minLength&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u043B\\u0438\\u043D\\u0430 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044F - 2 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430\"),errors.profileDescriptionErrors.maxLength&&/*#__PURE__*/React.createElement(\"span\",{className:\"popup__field-error\"},\"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u043B\\u0438\\u043D\\u0430 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044F - 200 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432\")),/*#__PURE__*/React.createElement(\"button\",{disabled:isSubmitDisabled,className:\"popup__submit-button\",onClick:handleSubmit,name:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"},\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"));}export default EditProfilePopup;","map":{"version":3,"sources":["/Users/alyona/Docs/Praktikum-Projects/mesto-react/src/components/EditProfilePopup.js"],"names":["React","useCallback","PopupWithForm","CurrentUserContext","formsValidator","EditProfilePopup","isOpen","onClose","onUpdateUser","useState","userName","profileDescription","formValues","setFormValues","userNameErrors","required","minLength","maxLength","profileDescriptionErrors","errors","setErrors","currentUserData","useContext","handleSubmit","e","preventDefault","name","about","useEffect","handleNameChange","target","value","prevState","userNameValidationResult","validateEditProfileNameInput","handleDescriptionChange","profileDescriptionValidationResult","validateEditProfileDescriptionInput","isUserNameInvalid","Object","values","some","Boolean","isDescriptionInvalid","isSubmitDisabled"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport { formsValidator } from './FormsValidator.js';\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n\n    const [formValues, setFormValues] = React.useState({\n        userName: \"\",\n        profileDescription: \"\"\n    });\n\n    const [errors, setErrors] = React.useState({\n        userNameErrors: {\n            required: false,\n            minLength: false,\n            maxLength: false,\n        },\n        profileDescriptionErrors: {\n            required: false,\n            minLength: false,\n            maxLength: false,\n        }\n    });\n\n    const currentUserData = React.useContext(CurrentUserContext);\n\n    const handleSubmit = useCallback((e) => {\n        e.preventDefault();\n        onUpdateUser({\n            name: formValues.userName,\n            about: formValues.profileDescription,\n        });\n    }, [onUpdateUser, formValues]);\n\n    React.useEffect(() => {\n        if (currentUserData) {\n            setFormValues({\n                userName: currentUserData.name,\n                profileDescription: currentUserData.about});\n        }\n    }, [currentUserData]);\n\n    const handleNameChange = useCallback((e) => {\n        const { name, value } = e.target;\n        setFormValues((prevState) => ({ ...prevState, [name]: value }));\n        const userNameValidationResult = formsValidator.validateEditProfileNameInput(value);\n        setErrors((prevState) => ({...prevState, \n            userNameErrors: userNameValidationResult,\n        }));\n    }, [setFormValues, setErrors]);\n\n    const handleDescriptionChange = useCallback((e) => {\n        const { name, value } = e.target;\n        setFormValues((prevState) => ({...prevState, [name]: value}));\n        const profileDescriptionValidationResult = formsValidator.validateEditProfileDescriptionInput(value);\n        setErrors((prevState) => ({...prevState, \n            profileDescriptionErrors: profileDescriptionValidationResult,\n        }));\n    }, [setFormValues, setErrors]);\n\n    const isUserNameInvalid = Object.values(errors.userNameErrors).some(Boolean);\n    const isDescriptionInvalid = Object.values(errors.profileDescriptionErrors).some(Boolean);\n    const isSubmitDisabled = isUserNameInvalid || isDescriptionInvalid;\n \n    return (\n        <PopupWithForm title=\"Редактировать профиль\" name=\"profile\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit} >\n        <label className=\"popup__input\">\n          <input className=\"popup__field popup__field_name\" value={formValues.userName} onChange={handleNameChange} type=\"text\" name=\"userName\" placeholder=\"Имя\" />\n          {errors.userNameErrors.required && <span className=\"popup__field-error\">Пожалуйста, заполните поле</span>}\n          {errors.userNameErrors.minLength && <span className=\"popup__field-error\">Минимальная длина имени - 2 символа</span>}\n          {errors.userNameErrors.maxLength && <span className=\"popup__field-error\">Максимальная длина имени - 40 символов</span>}\n        </label>\n\n        <label className=\"popup__input\">\n          <input className=\"popup__field popup__field_description\" value={formValues.profileDescription} onChange={handleDescriptionChange} type=\"text\" name=\"profileDescription\" placeholder=\"О себе\" />\n          {errors.profileDescriptionErrors.required && <span className=\"popup__field-error\">Пожалуйста, заполните поле</span>}\n          {errors.profileDescriptionErrors.minLength && <span className=\"popup__field-error\">Минимальная длина описания - 2 символа</span>}\n          {errors.profileDescriptionErrors.maxLength && <span className=\"popup__field-error\">Максимальная длина описания - 200 символов</span>}\n        </label>\n\n        <button disabled={isSubmitDisabled} className=\"popup__submit-button\" onClick={handleSubmit} name=\"Сохранить\">Сохранить</button>\n      </PopupWithForm>\n    );\n\n}\n\nexport default EditProfilePopup;"]},"metadata":{},"sourceType":"module"}