{"ast":null,"code":"class Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  getUserData() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: this.headers\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  getInitialCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: this.headers\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  editProfile(formValues) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: formValues['user-name'],\n        about: formValues['profile-description']\n      })\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  addNewCard(pictureLink, pictureDescription) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        link: pictureLink,\n        name: pictureDescription\n      })\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (!isLiked) {\n      return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n        method: 'PUT',\n        headers: this.headers\n      }).then(res => {\n        return this._getResponseData(res);\n      });\n    } else {\n      return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n        method: 'DELETE',\n        headers: this.headers\n      }).then(res => {\n        return this._getResponseData(res);\n      });\n    }\n  }\n\n  changeAvatar(avatarLink) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: avatarLink\n      })\n    }).then(res => {\n      return this._getResponseData(res);\n    });\n  }\n\n  _getResponseData(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\n  }\n\n  loadAppInfo() {\n    return Promise.all([this.getInitialCards(), this.getUserData()]);\n  }\n\n}\n\nexport const api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: '281eea5d-a9b0-4240-a494-1ec91d19957f',\n    'Content-Type': 'application/json'\n  }\n});","map":{"version":3,"sources":["/Users/alyona/Docs/Praktikum-Projects/mesto-react/src/utils/Api.js"],"names":["Api","constructor","baseUrl","headers","getUserData","fetch","then","res","_getResponseData","getInitialCards","editProfile","formValues","method","body","JSON","stringify","name","about","addNewCard","pictureLink","pictureDescription","link","deleteCard","cardId","changeLikeCardStatus","isLiked","changeAvatar","avatarLink","avatar","ok","json","Promise","reject","Error","status","loadAppInfo","all","api","authorization"],"mappings":"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","sourcesContent":["class Api {\n    constructor({ baseUrl, headers }) {\n        this.baseUrl = baseUrl;\n        this.headers = headers;\n    }\n\n    getUserData() {\n        return fetch(`${this.baseUrl}/users/me`, {\n            headers: this.headers,\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    getInitialCards() {\n        return fetch(`${this.baseUrl}/cards`, {\n            headers: this.headers,\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    editProfile(formValues) {\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'PATCH',\n            headers: this.headers,\n            body: JSON.stringify({\n                name: formValues['user-name'],\n                about: formValues['profile-description']\n            })\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    addNewCard(pictureLink, pictureDescription) {\n        return fetch(`${this.baseUrl}/cards`, {\n            method: 'POST',\n            headers: this.headers,\n            body: JSON.stringify({\n                link: pictureLink,\n                name: pictureDescription\n            })\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    deleteCard(cardId) {\n        return fetch(`${this.baseUrl}/cards/${cardId}`, {\n            method: 'DELETE',\n            headers: this.headers,\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    changeLikeCardStatus(cardId, isLiked) {\n        if (!isLiked) {\n            return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n                method: 'PUT',\n                headers: this.headers,\n            })\n                .then(res => {\n                    return this._getResponseData(res);\n                });\n        }\n        else {\n            return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n                method: 'DELETE',\n                headers: this.headers,\n            })\n                .then(res => {\n                    return this._getResponseData(res);\n                });\n        }\n    }\n\n    changeAvatar(avatarLink) {\n        return fetch(`${this.baseUrl}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this.headers,\n            body: JSON.stringify({\n                avatar: avatarLink,\n            })\n        })\n            .then(res => {\n                return this._getResponseData(res);\n            });\n    }\n\n    _getResponseData(res){\n        if (res.ok) {\n            return res.json();\n        }\n\n        return Promise.reject(new Error(`Ошибка: ${res.status}`));\n    }\n\n    loadAppInfo() {\n        return Promise.all([this.getInitialCards(), this.getUserData()]);\n      }\n\n}\n\nexport const api = new Api({\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\n    headers: {\n        authorization: '281eea5d-a9b0-4240-a494-1ec91d19957f',\n        'Content-Type': 'application/json'\n    }\n});"]},"metadata":{},"sourceType":"module"}