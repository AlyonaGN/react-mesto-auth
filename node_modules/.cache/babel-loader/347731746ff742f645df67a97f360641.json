{"ast":null,"code":"import { ROUTES_MAP } from \"../utils/routesMap\";\nimport { setToken } from \"../utils/token\";\nexport const BASE_URL = 'https://auth.nomoreparties.co';\nexport const register = (password, email) => {\n  return fetch(`${BASE_URL}${ROUTES_MAP.SIGNUP}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      password,\n      email\n    })\n  }).then(response => {\n    if (response.status === 201) {\n      return response.json();\n    } else {\n      console.log(response);\n      return;\n    }\n  }).then(res => {\n    return res;\n  }).catch(err => console.log(err));\n};\nexport const login = (password, email) => {\n  return fetch(`${BASE_URL}${ROUTES_MAP.SIGNIN}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      password,\n      email\n    })\n  }).then(response => response.json()).then(data => {\n    if (data.token) {\n      console.log(data.token);\n      setToken(data.token);\n      return data;\n    }\n  }).catch(err => console.log(err));\n};\nexport const getContent = token => {\n  return fetch(`${BASE_URL}${ROUTES_MAP.USER_INFO}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(response => {\n    console.log(response);\n    return response.json();\n  }).catch(err => console.log(err));\n};","map":{"version":3,"sources":["/Users/alyona/Docs/Praktikum-Projects/mesto-auth/src/components/Authentication.js"],"names":["ROUTES_MAP","setToken","BASE_URL","register","password","email","fetch","SIGNUP","method","headers","body","JSON","stringify","then","response","status","json","console","log","res","catch","err","login","SIGNIN","data","token","getContent","USER_INFO"],"mappings":"AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,SAASC,QAAT,QAAyB,gBAAzB;AAEA,OAAO,MAAMC,QAAQ,GAAG,+BAAjB;AAEP,OAAO,MAAMC,QAAQ,GAAG,CAACC,QAAD,EAAWC,KAAX,KAAqB;AACzC,SAAOC,KAAK,CAAE,GAAEJ,QAAS,GAAEF,UAAU,CAACO,MAAO,EAAjC,EAAoC;AAC5CC,IAAAA,MAAM,EAAE,MADoC;AAE5CC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFmC;AAK5CC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAER,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAf;AALsC,GAApC,CAAL,CAOFQ,IAPE,CAOIC,QAAD,IAAc;AACZ,QAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA4B;AAC1B,aAAOD,QAAQ,CAACE,IAAT,EAAP;AACD,KAFD,MAGK;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACA;AACH;AACR,GAfE,EAgBFD,IAhBE,CAgBIM,GAAD,IAAS;AACX,WAAOA,GAAP;AACH,GAlBE,EAmBFC,KAnBE,CAmBKC,GAAD,IAASJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAnBb,CAAP;AAoBH,CArBM;AAuBP,OAAO,MAAMC,KAAK,GAAG,CAAClB,QAAD,EAAWC,KAAX,KAAqB;AACtC,SAAOC,KAAK,CAAE,GAAEJ,QAAS,GAAEF,UAAU,CAACuB,MAAO,EAAjC,EAAoC;AAC9Cf,IAAAA,MAAM,EAAE,MADsC;AAE9CC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFqC;AAK9CC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACR,MAAAA,QAAD;AAAWC,MAAAA;AAAX,KAAf;AALwC,GAApC,CAAL,CAONQ,IAPM,CAODC,QAAQ,IAAIA,QAAQ,CAACE,IAAT,EAPX,EAQNH,IARM,CAQAW,IAAD,IAAU;AACd,QAAIA,IAAI,CAACC,KAAT,EAAe;AACbR,MAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACC,KAAjB;AACAxB,MAAAA,QAAQ,CAACuB,IAAI,CAACC,KAAN,CAAR;AACA,aAAOD,IAAP;AACD;AACF,GAdM,EAeNJ,KAfM,CAeAC,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAfP,CAAP;AAgBD,CAjBI;AAmBL,OAAO,MAAMK,UAAU,GAAID,KAAD,IAAW;AACnC,SAAOnB,KAAK,CAAE,GAAEJ,QAAS,GAAEF,UAAU,CAAC2B,SAAU,EAApC,EAAuC;AACjDnB,IAAAA,MAAM,EAAE,KADyC;AAEjDC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEP,uBAAkB,UAASgB,KAAM;AAF1B;AAFwC,GAAvC,CAAL,CAONZ,IAPM,CAOAC,QAAD,IAAc;AAChBG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACA,WAAOA,QAAQ,CAACE,IAAT,EAAP;AACH,GAVM,EAWNI,KAXM,CAWAC,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAXP,CAAP;AAYD,CAbM","sourcesContent":["import { ROUTES_MAP } from \"../utils/routesMap\";\nimport { setToken } from \"../utils/token\";\n\nexport const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}${ROUTES_MAP.SIGNUP}`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ password, email })\n    })\n        .then((response) => {\n                if (response.status === 201){\n                  return response.json();\n                }\n                else {\n                    console.log(response);\n                    return;\n                }\n        })\n        .then((res) => {\n            return res;\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const login = (password, email) => {\n    return fetch(`${BASE_URL}${ROUTES_MAP.SIGNIN}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({password, email})\n    })\n    .then(response => response.json())\n    .then((data) => {\n      if (data.token){\n        console.log(data.token);\n        setToken(data.token);\n        return data;\n      }\n    })\n    .catch(err => console.log(err))\n  };\n  \n  export const getContent = (token) => {\n    return fetch(`${BASE_URL}${ROUTES_MAP.USER_INFO}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      }\n    })\n    .then((response) => {\n        console.log(response);\n        return response.json();\n    })\n    .catch(err => console.log(err))\n  };\n  "]},"metadata":{},"sourceType":"module"}